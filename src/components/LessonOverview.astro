---
import { baseUrl, lessonMarker, type AstroLesson } from '../helpers.astro';

export interface Props {
  category?: 'lesson' | 'bonus',
  lesson: AstroLesson,
}

const { category, lesson } = Astro.props;

const subPath = category == 'bonus' ? 'bonus/' : 'lessons/';

const lessonUrl = `${baseUrl}${subPath}${lesson.slug}`;
const slidesUrl = `${baseUrl}slides/${lesson.slug}`

const title = category == 'bonus'
  ? lesson.data.title
  : `${lessonMarker(lesson.data.state)} ${lesson.data.order}. ${lesson.data.title}`
---

<article class="post on-list">
  <h2 class="post-title">
    <a href={lessonUrl}>
      {title}
    </a>
  </h2>
  <div class="post-meta">
  </div>
  {lesson.data.tags && lesson.data.tags.length > 0 && (
    <span class="post-tags">
      {lesson.data.tags.map((tag) => (
        <a href={`${baseUrl}tags/${tag}/`}>{tag}</a>
      ))}
    </span>
  )}
  {lesson.data.description && (
    <div class="post-content">
      <p>{lesson.data.description}</p>
    </div>
  )}
  <div class="spaced">
    <a href={lessonUrl} class="read-more button inline">view full lesson</a>
    {lesson.data.hasSlides && <a href={slidesUrl} class="read-more button inline">view as slides</a>}
  </div>
</article>

<style>
.spaced *{
  padding-right: 10px;
}
</style>
