---
import LessonLayout from '../../layouts/LessonLayout.astro';
import LessonLinks from '../../components/LessonLinks.astro';
import LessonNavigation from '../../components/LessonNavigation.astro';

import { getLessons, baseUrl, buildLessonNavigationProps } from '../../helpers.astro';

export async function getStaticPaths() {
  const lessons = await getLessons();
 
  const navProps = buildLessonNavigationProps(lessons);

  return navProps;
}

const { lesson, prev, next } = Astro.props;

const { Content: LessonContent } = await lesson.render();

const altViewProps = !lesson.data.hasSlides
  ? {}
  : { altViewUrl: `${baseUrl}slides/${lesson.slug}`, altViewText: 'show slides'};
---

<LessonLayout {...altViewProps} {...lesson.data}>
  <LessonContent />
  <LessonLinks lesson={lesson.data} />
  <LessonNavigation prev={prev} next={next} view='lessons' />
</LessonLayout>

<style is:global>
  hr {
    display: none !important;
  }

  bonus-content {
    font-style: italic;
  }
</style>
