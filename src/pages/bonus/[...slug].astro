---
import LessonLayout from '../../layouts/LessonLayout.astro';
import LessonLinks from '../../components/LessonLinks.astro';

import { getBonusMaterials, baseUrl } from '../../helpers.astro';

export async function getStaticPaths() {
  const bonuses = await getBonusMaterials();

  return bonuses.map(bonus => ({
    params: { slug: bonus.slug },
    props: { bonus },
  }));
}

const { bonus } = Astro.props;

const { Content: BonusContent } = await bonus.render();

const altViewProps = !bonus.data.hasSlides
  ? {}
  : { altViewUrl: `${baseUrl}slides/${bonus.slug}`, altViewText: 'show slides'};
---

<LessonLayout {...altViewProps} {...bonus.data} category='bonus'>
  <BonusContent />
  <LessonLinks lesson={bonus.data} />
</LessonLayout>

<style is:global>
  hr {
    display: none !important;
  }

  bonus-content {
    font-style: italic;
  }
</style>
